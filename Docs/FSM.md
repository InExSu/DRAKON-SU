```mermaid
stateDiagram-v2
    [*] --> Инициализация
    
    state Основная_машина {
        Инициализация --> Загрузка_файла
        Загрузка_файла --> Ошибка 
        Загрузка_файла --> Отрисовка_схемы
        Отрисовка_схемы --> Ожидание_действия
        
        Ожидание_действия --> Редактирование_иконки : выбор
        Ожидание_действия --> Добавление_иконки : добавить
        Ожидание_действия --> Удаление_иконки : удалить
        Ожидание_действия --> Сворачивание_блока : свернуть
        Ожидание_действия --> Разворачивание_блока : развернуть
        Ожидание_действия --> Масштабирование : Ctrl+колесо
        
        state Обработка_ошибок {
            [*] --> Логирование
            Логирование --> Отображение_ошибки
            Отображение_ошибки --> [*]
        }
        
        Ожидание_действия --> Обработка_ошибок : ошибка
    }
    
    state Управляющие_декораторы {
        state Сохранение {
            [*] --> Автосохранение
        }
        
        state Валидация {
            [*] --> Проверка_связей
            Проверка_связей --> Проверка_иерархии
        }
    }
    
    Основная_машина --> Управляющие_декораторы : вызов
    Управляющие_декораторы --> Основная_машина : возврат
}

%% Комментарии:
%% 1. Добавлено состояние "Отрисовка_схемы" между загрузкой файла и основным циклом
%% 2. В этом состоянии происходит преобразование YAML в графическое представление
%% 3. Переход осуществляется только после успешной визуализации