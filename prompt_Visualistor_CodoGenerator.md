DRAKON-визуализатор и кодогенератор на Python

**Цель**: Создать двунаправленный инструмент для работы с DRAKON-схемами:
1. **Визуализатор**: Преобразует YAML-описание схемы в графическое представление
2. **Девизуализатор**: Генерирует исполняемый Python-код из диаграмм

---

### Технические требования

**1. Формат входных данных** (как в предыдущих примерах):
```yaml
functions:
  process_data:
    nodes:
      - id: start
        type: "start"
        connections: ["fork"]
      - id: fork
        type: "fork"
        connections: ["task1", "task2"]
      - id: task1
        type: "action"
        text: "process_part1()"
        connections: ["join"]
```

**2. Требования к визуализатору**:
- Автоматическая компоновка элементов с учетом:
  - Иерархии узлов (вложенные блоки)
  - Типов соединений (последовательные/параллельные)
  - Оптимального использования пространства
- Поддержка визуальных элементов:
  ```mermaid
  flowchart TD
      A[Прямоугольник] --> B{Ромб}
      B -->|Да| C[Свертка]
      B -->|Нет| D((Круг))
  ```
- Экспорт в SVG/PNG с настраиваемыми темами

**3. Требования к кодогенератору**:
- Поддержка языковых конструкций:
  ```python
  # Параллельные задачи
  with ThreadPoolExecutor() as executor:
      future1 = executor.submit(task1)
      future2 = executor.submit(task2)
  ```
- Обработка особых случаев:
  - Свертываемые блоки → функции/контексты
  - Условия → if/else
  - Циклы → while/for

**4. Интерфейс** (должен включать):
```python
    def visualize(cls, yaml_schema: str) -> Diagram:
        """Создает графическое представление схемы"""
    
    def generate_code(cls, yaml_schema: str) -> str:
        """Генерирует Python-код"""
    
    def parse_diagram(cls, image_path: str) -> str:
        """Обратное преобразование (изображение → YAML)"""
```

---

### Пример запроса для нейросети

"Разработай Python-библиотеку для двунаправленного преобразования между DRAKON-схемами и кодом. Требования:

1. **Ядро системы**:
- Парсер YAML-описания схем (с валидацией)
- Алгоритм автоматической компоновки графа (NetworkX + Graphviz)
- Генератор кода с шаблонами (Jinja2)

2. **Визуализатор** должен:
- Определять координаты узлов без явного указания position
- Поддерживать элементы:
  ```python
  NODE_TYPES = {
      'start': {'shape': 'circle', 'color': '#00ff00'},
      'fork': {'shape': 'diamond', 'color': '#ff9900'}
  }
  ```
- Рендерить в SVG с возможностью интерактивности (скрытие блоков)

3. **Кодогенератор** должен:
- Преобразовывать узлы в языковые конструкции:
  ```python
  # action → исполняемая строка
  if node['type'] == 'action':
      yield f"{node['text']}"
  
  # fork → параллельное выполнение
  elif node['type'] == 'fork':
      yield "with ThreadPoolExecutor() as executor:"
  ```
- Сохранять структуру отступов

4. **Дополнительно**:
- CLI-интерфейс для конвертации
- Плагины для IDE (VSCode/PyCharm)
- Поддержка кастомных шаблонов генерации

Пример работы:
```python
# Визуализация
diagram = DrakonConverter.visualize("schema.yaml")
diagram.export("diagram.svg")

# Генерация кода
python_code = DrakonConverter.generate_code("schema.yaml")
```

Предложи:
1. Архитектуру решения
2. Пример реализации ключевых методов
