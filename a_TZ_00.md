Графический редактор схем ДРАКОН Паронджанова на пайтон.

Программа расширяет DrakonHub Степана Митькина https://github.com/stepan-mitkin/drakonhub_desktop:
1 - Икона "Вставка" будет разворачиваться в диаграмму в текущей диаграмме и сворачиваться обратно в икону.
2 - В прямоугольнике аргументов будет признак языка программирования, для правильной генерации кода.

В программе будут: 
- панель инструментов, 
- холст с графическими примитивами - линии, овалы, прямоугольники, ромбы ....

Программа будет реагировать на нажатия клавы, мышки.

Программа будет контролировать редактирование диаграммы ДРАКОН.

Так как все программы это автоматы, то минимальная диаграмма будет иметь вид "силуэт" - специально разработанная Паронджановым графическая  конструкция.

Минимальный вид "силуэт":

[Техноязык и шампур-метод - сущность, преемственность, развитие](https://drakon.su/texnojazyk_i_shampur-metod_-_suschnost_preemstvennost_razvitie)
[Описание визуального синтаксиса языка ДРАКОН Паронджановым](https://drakon.su/jazyk/vizualnyj_sintaksis#ris_123-127) [файл](a_TZ_Syntax_Parondzhanov.md)
[Описание визуального синтаксиса языка ДРАКОН Попов файл](a_TZ_Syntax_Popov.md)

Сделать линии от if разными цветами для Да и Нет ?

Мне нужно создать программу на языке Python, которая моделирует поведение системы через **иерархию машин конечных состояний (FSM)**.  
Важные требования:

1. **Не использовать классы** — только функции и словари.
2. Вместо `if/else` использовать конструкцию, имитирующую `switch`, например, через словари.
3. Программа должна быть **иерархической**: состояния могут содержать подсостояния.
4. Система должна моделировать **логику создания визуальной программы по стандарту ДРАКОН**, включая такие операции, как:
   - Ввод атома
   - Пересадка лианы
   - Заземление лианы
   - Боковое присоединение
   - Добавление варианта / ветки
   - Работа с критическими точками
5. Каждое действие должно вызывать соответствующее состояние или подсостояние.

Пример сосояний и переходов:

- Состояние: "ожидание команды"
- Команда: "выделена икона" → Переход в состояние: "показать меню действий"
- Команда: "нажата клавиша латинская a" → Переход в состояние: "на линии, на которые можно вставить икону Действие, поместить круг".
- Команда: "мышкой выделен круг, обозначающий место вставки иконы" → Переход в состояние: "вставить икону на диаграмму"
...

Требуется:

- Использовать **явное описание состояний и действий**
- Реализовать **FSM через словари и функции**
- Обеспечить возможность **расширения машины состояний**

Требуется графическая реализация на Python под макось, в дальнейшем и под виндовс.